<!-- lista.html -->
<!DOCTYPE html>
<html layout:decorate="~{layout}">
<head>
  <meta charset="UTF-8" />
</head>
<body>
  <section class="layout-content" layout:fragment="corpo">

    <nav class="navbar navbar-expand-md bg-light mb-3">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item active">
          <i class="oi oi-caret-right"></i>
          <span>Lista de Propostas</span>
        </li>
      </ul>
      <a class="btn btn-primary btn-md" th:href="@{/propostas/cadastrar}" role="button">
        <span class="oi oi-plus"></span>
        <span>Nova Proposta</span>
      </a>
    </nav>

    <div class="container">
      <div th:replace="~{fragments/alert}"></div>
      <div class="table-responsive">
        <table class="table table-striped table-hover table-sm">
          <thead>
            <tr>
              <th>#</th>
              <th>Cliente</th>
              <th>Veículo</th>
              <th>Valor (R$)</th>
              <th>Data</th>
              <th>Status</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="p : ${propostas}">
              <td th:text="${p.id}">1</td>
              <td th:text="${p.cliente.nome}">Fulano</td>
              <td th:text="${p.veiculo.modelo + ' (' + p.veiculo.placa + ')'}">Modelo</td>
              <td th:text="${#numbers.formatDecimal(p.valor,2,2,'COMMA')}">R$ 00,00</td>
              <td th:text="${p.dataCompra}">2025-06-18</td>
              <td th:text="${p.status}">ABERTO</td>
              <td>
                <a class="btn btn-info btn-sm"
                   th:href="@{/propostas/editar/{id}(id=${p.id})}"
                   role="button">
                  <span class="oi oi-brush"></span>
                </a>
                <a class="btn btn-danger btn-sm"
                   th:href="@{/propostas/excluir/{id}(id=${p.id})}"
                   role="button"
                   onclick="return confirm('Confirma exclusão desta proposta?');">
                  <span class="oi oi-circle-x"></span>
                </a>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

  </section>
</body>
</html>
